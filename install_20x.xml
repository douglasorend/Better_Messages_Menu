<?xml version="1.0"?>
<!DOCTYPE modification SYSTEM "http://www.simplemachines.org/xml/modification">
<modification xmlns="http://www.simplemachines.org/xml/modification" xmlns:smf="http://www.simplemachines.org/">
<id>dougiefresh:BetterMessagesMenu</id>
<name>Better Messages Menu</name>
<version>1.0.1</version>

<file name="$sourcedir/PersonalMessage.php">
	<!-- MessageMain function -->
	<operation>
		<search position="before"><![CDATA['settings' => 'MessageSettings',]]></search>
		<add><![CDATA[
		'BetterMessages_ucp' => 'BetterMessages_Hook',]]></add>
	</operation>
	
	<!-- messageIndexBar function -->
	<operation>
		<search position="after"><![CDATA[// Do we have a limit on the amount of messages we can keep?]]></search>
		<add><![CDATA[// If we are being called by the Better Messages mod, return with the array:
	if (isset($_GET['sa']) && $_GET['sa'] == 'BetterMessages_ucp')
	{
		$context['pm_areas'] = $pm_areas;
		return;
	}

	]]></add>
	</operation>
</file>
</modification>